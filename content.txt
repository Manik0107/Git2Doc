# Code2Doc: Automated Technical Documentation Generator

## Introduction
Code2Doc is a Python-based tool designed to automate the creation of comprehensive technical documentation for software projects hosted on GitHub. The tool analyzes a given repository, extracts relevant information about its structure, components, and functionality, utilizes AI (Gemini 2.0) via the `agno` framework, and generates a well-structured Markdown document. This document is then converted into a polished PDF file that includes an embedded workflow diagram illustrating the project's architecture. The primary motivation behind Code2Doc is to reduce the manual effort involved in documenting software projects, making it easier for developers to understand, maintain, and onboard new team members.

This documentation is intended for software developers, architects, technical writers, and anyone involved in the development or maintenance of software projects. It provides a detailed explanation of Code2Doc's architecture, components, and usage, enabling users to understand how the tool works and how to leverage it for their own projects. The key use cases include: generating documentation for open-source projects, creating internal documentation for enterprise applications, and producing technical reports for academic research.


## Workflow Diagram

![Project Workflow Diagram](/Users/manikmanavenddram/Code2Doc/project_workflow_diagram.png)

*Figure: High-level workflow architecture of the project*


## Overview
Code2Doc automates the creation of technical documentation by analyzing a GitHub repository, identifying key components and dependencies, and generating a Markdown-based documentation file that is subsequently converted to PDF. The core functionality relies on the `GithubTools` library for retrieving repository information and Google's Gemini 2.0 AI model (accessed through the `agno` framework) for code analysis and documentation generation. Graphviz is employed to generate a visual representation of the project's workflow. The tool streamlines the documentation process, providing developers with a means to produce high-quality technical documentation with minimal manual effort.

## Architecture
The Code2Doc architecture comprises several key modules that work together to automate the documentation generation process:

1.  **Main Module (`main.py`):** This is the entry point of the application. It's responsible for parsing user input (GitHub repository URL), initializing the `GithubTools` library, calling the AI-powered analysis using `agno`, orchestrating the documentation and workflow diagram generation, and finally, converting the Markdown output to a PDF document.

2.  **Documentation Creation Module (`doc_creation.py`):** This module takes the Markdown content generated by the AI analysis and transforms it into a professional-looking PDF document. It utilizes the `PyMuPDF` library to handle PDF formatting, styling including headings, lists and embedding the workflow diagram.

3.  **Workflow Diagram Generation Module (`generate_project_workflow.py`):** This module generates a visual workflow diagram using Graphviz, based on a workflow JSON file.

4.  **AI Analysis and Documentation Agent:** This component leverages the `agno` framework, Google Gemini 2.0, and a custom documentation agent to analyze the source code and generate the detailed technical documentation. The documentation includes function descriptions, class definitions, dependency analysis, and architectural overviews.

The overall architecture emphasizes modularity and separation of concerns, facilitating maintainability and extensibility.

## Components

### 1. `main.py`

#### Purpose and Functionality:
The `main.py` script serves as the orchestrator of the documentation generation process. It handles user input validation, interacts with the GitHub API via `GithubTools`, invokes the AI-powered analysis through the `agno` framework and `google-genai`, and manages the creation of the final documentation output.

#### Key Implementation Details:

*   **Input Processing:** The script receives the GitHub repository URL as input, parses the URL to extract the owner and repository name.
*   **Repository Data Retrieval:** Uses `GithubTools` to fetch the file structure and content of the repository from github.
*   **AI-Powered Analysis:**  Leverages `agno` and `google-genai` along with a prompt designed for documentation to generate the `content.txt` file. The prompt feeds the AI the contents of all files within the target repository.
*   **Documentation generation:** Creates a PDF of the `content.txt` file, generates a workflow diagram image, and then inserts the diagram into the markdown of the `content.txt` file before generating the updated `technical_documentation.pdf` file.

### 2. `doc_creation.py`

#### Purpose and Functionality:
The `doc_creation.py` module is responsible for converting the Markdown-formatted documentation generated in `content.txt` into a well-structured PDF document. It utilizes the `PyMuPDF` library to handle PDF creation and formatting.

#### Key Implementation Details:

*   **Markdown Parsing:** Reads the documentation content from the `content.txt` file, which is formatted in Markdown.
*   **PDF Generation:** Uses `PyMuPDF` to creates a new PDF document.
*   **Formatting and Styling:**  Implements formatting rules to render Markdown headings, paragraphs, lists, and code blocks in the PDF document.
*   **Image Embedding:** Embeds the generated workflow diagram (`project_workflow_diagram.png`) into the PDF.

### 3. `generate_project_workflow.py`

#### Purpose and Functionality:
The `generate_project_workflow.py` script is responsible for generating a visual workflow diagram from a workflow description stored in a JSON file named `project_workflow.json`. It uses the Graphviz library to create the diagram.

#### Key Implementation Details:

*   **Workflow Description Parsing:** Reads the workflow description from the `project_workflow.json` file. This file specifies the nodes and edges of the workflow diagram.
*   **Graphviz Integration:**  Uses Graphviz to create a directed graph representing the workflow.
*   **Diagram Generation:** Generates the workflow diagram as a PNG image (`project_workflow_diagram.png`).

### 4.  Dependencies and Imports

*   **`GithubTools`:** Used for interacting with the github API to retrieve file contents.
*   **`PyMuPDF` (fitz):** Used for manipulating PDF files.
*   **`python-dotenv`:** Used for loading environment variables from a `.env` file.
*   **`google.generativeai`:** Used for generating the documentation content using the Gemini AI model.
*   **`PIL` (Pillow):** Used for working with images such as the workflow diagram.
*   **`graphviz`:** Used in `generate_project_workflow.py` for generating the workflow diagram.

## Implementation Details

### Workflow Execution

1.  The program starts by taking a GitHub repository URL as an argument in `main.py`.
2.  `main.py` uses `GithubTools` to download all of the file contents of the provided repository URL.
3.  `main.py` passes the file content to the appropriate Google Gemini Pro model function. The Gemini Pro model is used to automatically generate the documentation text for the repository as a whole.
4.  The generated text is saved to `content.txt`, and rendered as a PDF to `technical_documentation.pdf` using `doc_creation.py`.
5.  Finally, another Google Gemini Pro model is used to automatically generate a workflow representing the program.
6.  The workflow is output to a `project_workflow.json` file, and is rendered to a PNG image using `generate_project_workflow.py`.
7.  The workflow image is embedded into the `content.txt` markdown file. The file is then rendered to `technical_documentation.pdf` again.

### Error Handling
The application includes basic error handling to catch exceptions during file processing, API calls, and documentation generation. More robust error handling could be implemented to improve the application's reliability.

### Configuration and Environment setup
The application relies on environment variables for API keys and other configuration parameters. These variables are loaded from a `.env` file using the `python-dotenv` library.  This allows for secure configuration and prevents sensitive information from being hardcoded into the source code.

## Integration

### GitHub API Integration
The application integrates with the GitHub API through the use of the `GithubTools` library. This integration enables the application to fetch repository metadata, file contents, and other relevant information required for documentation generation.

### Google Gemini API Integration
The application leverages the Google Gemini API via the `google-genai` and `agno` framework to automatically generate the documentation content and project workflow.  The API is called with detailed prompts to ensure the quality and completeness of the generated documentation.

## Conclusion

Code2Doc provides an automated solution for generating technical documentation from GitHub repositories. By combining repository analysis, AI-powered content generation, and visual workflow diagrams, the tool streamlines the documentation process and enables developers to create high-quality documentation with minimal effort. The key features include automated repository analysis, comprehensive documentation with introductions and conclusions, and professional PDF output. Potential use cases include generating documentation for open-source projects, creating internal documentation for enterprise applications, and producing technical reports for academic research. Future considerations include adding support for other version control systems, improving the AI-powered content generation capabilities, and enhancing the PDF formatting options. The tool's modular architecture allows for easy extension and adaptation to meet evolving documentation needs.